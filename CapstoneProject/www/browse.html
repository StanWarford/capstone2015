<!DOCTYPE html>
<html>
	<head>
		<title>Page Title</title>
		<meta name = "viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/one.css" />
		<link rel="stylesheet" href="css/index.css" />
		<script src="jquery-1.11.2.min.js"></script>
		<script src="js/a.js"></script>
		<script src="js/b.js"></script>
		<link rel="stylesheet" href="css/peptheme.css">
		<!--<script src="js/head.js"></script>-->
	</head>
	<body>
		<div data-role="page" data-theme="a" id="index">
			<div data-role="panel" id="mypanel">
				<ul data-role="listview" data-inset="true" style="min-width:210px;">
					<li><a href="search.html" class="ui-icon-search">Search</a></li>
					<li><a href="browse.html" class="ui-icon-grid">Browse</a></li>
					<li><a href="options.html" class="ui-icon-gear">Options</a></li>
					<li><a href="splash.html">Temp: Splash</a></li>
					<li><a href="first.html">Temp: First</a></li>
				</ul>
				<a href="#my-header" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-right ui-btn-a">Close panel</a>
			</div><!-- /panel -->
			<div data-role="header" id="my-header" data-theme="a">
				<a href="#mypanel" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-bars ui-btn-icon-left ui-btn-a menu">menu</a>
				<h1>Page Title</h1>
				<a href="index.html" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-home ui-btn-icon-right ui-btn-a menu">home</a>
			</div> <!-- /header -->
			<div data-role="content">
				<ul data-role="listview" id="list-classes">
				</ul>
			</div> <!-- /content -->
			<div data-role="footer" data-theme="a" data-position="fixed">
				<h4>footer</h4>
			</div> <!-- /footer -->
		</div> <!-- /page -->
	</body>
	<script>
		$(document).on('pagebeforeshow', '#index', function(){
			$.ajax({
				url: "http://dbserver-capstone2015.rhcloud.com/get/adam",
				type: "GET",
				dataType: "text"
			}).done(function(result){
				var json = JSON.parse(result);
				for(var undef in json){
					for(var department in json[undef]){
						if (department != "_id"){
							for(var clas in json[undef][department]){
								for(var section in json[undef][department][clas]){
									console.log(json[undef][department][clas][section]["section"]);
									var i = 1;
									var nameid = "listitem" + i;
									$('#list-classes').append('<li class="ui-field-contain" id="listitem"></li>');
									$('[class=ui-field-contain]').css('background-color','#b9cf96')
									if(json[undef][department][clas][section]["status"] == "closed") {
										$('[class=ui-field-contain]').css('background-color','#f06d6d')
									}
									$('[class=ui-field-contain]').append(json[undef][department][clas][section]["section"]);
									$('[class=ui-field-contain]').append(nameid);
									$('[class=ui-field-contain]').append('<span class="flipperBrowse"><select id="flip2" data-role="slider" data-mini="true"><option value="off">Off</option><option value="on">On</option></select></span>');
									$('#index').trigger('create');
									$("#list-classes").listview("refresh"); 
									i++;
								}
							}
						}
					}
				}
			});
		// 	$.ajax({
		// 		url: "http://dbserver-capstone2015.rhcloud.com/get/adam",
		// 		type: "GET",
		// 		dataType: "text"
		// 	}).done(function(result){
		// 		var json = JSON.parse(result);
		// 		for(var undef in json){
		// 			for(var department in json[undef]){
		// 				if (department != "_id"){
		// 					for(var clas in json[undef][department]){
		// 						for(var section in json[undef][department][clas]){
		// 							$('#list-classes').append('<li class="ui-field-contain" id="listitem"><a href="#"></a></li>');
		// 							$('[class=ui-field-contain]').css('background-color','#b9cf96')
		// 							if(json[undef][department][clas][section]["status"] == "closed") {
		// 								$('[class=ui-field-contain]').css('background-color','#f06d6d')
		// 							}
		// 							$('[class=ui-field-contain]').append(json[undef][department][clas][section]["section"]);
		// 							$("#list-classes").listview("refresh"); 
		// 						}
		// 					}
		// 				}
		// 			}
		// 		}
		// 	});
		// });
		$("#mypanel").load("panel.txt");
	</script>
</html>